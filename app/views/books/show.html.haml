%title #{@book.title}
%div{:style => "text-align: center;" }
    %h2{ :style => "font-size: 160%; color: MidnightBlue" }= @book.title
    %h2{ :style => "font-size: 110%;" }ISBN: #{@book.isbn}
    %br
    %h2{ :style => "font-size: 110%;" }Author:
    %h3= @book.author
    %h2{ :style => "font-size: 110%;" }Summary: 
    %h3= @book.summary
    %br
    %h2{ :style => "font-size: 110%;" }Publisher: #{@book.publisher}
    %h2{ :style => "font-size: 110%;" }Year: #{@book.publication_year}
    %h2{ :style => "font-size: 110%;" }Edition: #{@book.edition}
    %br
    -if @current_user && (@current_user.position == "Admin" || @current_user.position == "Staff")
        %table#editdeletebook
            %tbody
                %tr
                    %td= button_to 'Edit This Book', edit_book_path(@book), :method => :get
                    %td= button_to 'Delete This Book', book_path(@book), :method => :delete, :data => {:confirm => "Are you sure you want to delete this book, #{@book.title}?"}

    %h2{ :style => "font-size: 120%; color: Green;" } Post New Review
    - if @current_user
        // %h3{ :style => "color: Green" } You already posted review for this book!
        %div{ :style => "text-align: center;" }
            -unless @review == nil
                -if @review.errors.any?
                    %ul
                        -@review.errors.full_messages.each do |msg|
                            %li{ :style => "color: maroon;" } #{msg}
            = form_tag review_create_path do
                %p 
                    Rating :
                    %span(class="starRating")
                        = radio_button nil, nil, "5", :name => "rating", :id => "new_rating5"
                        = label nil, "5", :for => "new_rating5"
                        
                        = radio_button nil, nil, "4", :name => "rating", :id => "new_rating4"
                        = label nil, "4", :for => "new_rating4"
                        
                        = radio_button nil, nil, "3", :name => "rating", :id => "new_rating3"
                        = label nil, "3", :for => "new_rating3"
                        
                        = radio_button nil, nil, "2", :name => "rating", :id => "new_rating2"
                        = label nil, "2", :for => "new_rating2"
                        
                        = radio_button nil, nil, "1", :name => "rating", :id => "new_rating1"
                        = label nil, "1", :for => "new_rating1"
                = text_area_tag 'new_review_comment', nil, size: "50x7", :placeholder => "Enter your Review", :id => "new_review_comment"
                %br
                = submit_tag 'Submit Review', :class => "submit_button"
    - else
        %u= link_to "Please Sign-In to post review!", login_path
    %hr
    %h2{ :style => "font-size: 120%; color: Green;" } Top Reviews
    - if @book.reviews.empty?
        %h2{ :style => "font-size: 90%; color: Maroon;" } There're currently no reviews for this book!
    - else
        - @book.reviews.limit(5).each do |review|
            %hr{ :style => "width: 50%; font-size: 100%;" }
            By 
            %u{ :style => "font-size: 110%; color: Maroon;" } #{review.user.first_name} #{review.user.last_name}
            %div
                %br
                Rating : 
                - if review.star == 5
                    =image_tag("star_img/5stars.png", height: '17', width: '80')
                - elsif review.star == 4
                    =image_tag("star_img/4stars.png", height: '17', width: '80')
                - elsif review.star == 3
                    =image_tag("star_img/3stars.png", height: '17', width: '80')
                - elsif review.star == 2
                    =image_tag("star_img/2stars.png", height: '17', width: '80')
                - else
                    =image_tag("star_img/1star.png", height: '17', width: '80')
            %div{:style => "display: inline-table; width: 50%; " }
                %h2{ :style => "font-size: 100%;" } Comment:
                #{review.comment}